<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <Luna_BRF.PsychicRitualDef_CrimsonProvocation>
    <defName>BRF_CrimsonProvocation</defName>
    <label>Crimson Provocation</label>
    <description>Use the distinction for flesh entity and other entity to prepare unique offerings, creating psychic waves specifically designed to attract these flesh entities - like a void provocation, but crimson.</description>
    <iconPath>UI/PsychicRituals/BRF_PsychicRitual_CrimsonProvocation</iconPath>
    <outcomeDescription>With the current quality, there's a {0} chance the invoker will receive dark psychic shock.</outcomeDescription>
    <researchPrerequisite>BRF_CrimsonProvocationResearch</researchPrerequisite>
    <hoursUntilOutcome>2</hoursUntilOutcome>
    <layerWhitelist>
      <li>Surface</li>
    </layerWhitelist>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_LivingFlesh</li>
        </thingDefs>
      </filter>
      <count>35</count>
    </requiredOffering>
    <castableOnPocketMaps>false</castableOnPocketMaps>
    <cooldownHours>180</cooldownHours>
    <psychicShockChanceFromQualityCurve>
      <points>
        <li>(0, 0.9)</li>
        <li>(0.5, 0.25)</li>
        <li>(0.9, 0.05)</li>
        <li>(1, 0.01)</li>
      </points>
    </psychicShockChanceFromQualityCurve>
    <darkPsychicShockDurarionHoursRange>2~4</darkPsychicShockDurarionHoursRange>
    <incidentDelayHoursRange>2~4</incidentDelayHoursRange>
    <fleshEntityAssaultList>
      <li>
        <incidentDef>BRF_LittleBloodstainedParasiticedInsectAssault</incidentDef>
        <selectionWeight>5</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_BloodstainedParasiticedInsectAssault</incidentDef>
        <selectionWeight>6</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_BloodvineZombieSwarm</incidentDef>
        <selectionWeight>13</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_ThornbladeMaggotSwarm</incidentDef>
        <selectionWeight>12</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_ClumpAssault</incidentDef>
        <selectionWeight>15</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_CrimsonLivingFungiAssault</incidentDef>
        <selectionWeight>7</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_ScarletCerebralJellyfishAssault</incidentDef>
        <selectionWeight>5</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_CreepJoiner_RebirthPsycorpse</incidentDef>
        <selectionWeight>5</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_CreepJoinerJoin_OrinTransmuteFlesh</incidentDef>
        <selectionWeight>2</selectionWeight>
      </li>
      <li>
        <incidentDef>BRF_CreepJoinerJoin_OrinFleshyModder</incidentDef>
        <selectionWeight>2</selectionWeight>
      </li>
    </fleshEntityAssaultList>
  </Luna_BRF.PsychicRitualDef_CrimsonProvocation>

  <Luna_BRF.PsychicRitualDef_SummonSwarms>
    <defName>BRF_SummonSwarms</defName>
    <label>Draw Entity Swarms</label>
    <description>Using special meat as bait triggers a pulse that attracts insects in a particular state. The use of this ritual is not theoretically designed for human use, and its effects can be somewhat disturbing.</description>
    <iconPath>UI/PsychicRituals/BRF_PsychicRitual_SummonSwarms</iconPath>
    <researchPrerequisite>BRF_SummonSwarmsResearch</researchPrerequisite>
    <outcomeDescription>The higher the ritual quality, the more swarms that will be summoned.</outcomeDescription>
    <hoursUntilOutcome>2</hoursUntilOutcome>
    <castableOnPocketMaps>false</castableOnPocketMaps>
    <layerWhitelist>
      <li>Surface</li>
    </layerWhitelist>
    <combatPointMultiplierFromQualityRange>0.5~2.5</combatPointMultiplierFromQualityRange>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_LivingFlesh</li>
        </thingDefs>
      </filter>
      <count>6</count>
    </requiredOffering>
    <cooldownHours>180</cooldownHours>
  </Luna_BRF.PsychicRitualDef_SummonSwarms>

  <Luna_BRF.PsychicRitualDef_SummonClumps>
    <defName>BRF_SummonClumps</defName>
    <label>Draw Clumps</label>
    <description>Create a psychic pulse which will draw a distant horde of Clumps towards your local area. These Clumps will arrive after some time with hunger, and it is recommended that you have carcasses ready for them to eat, or be prepared to turn them into corpses.</description>
    <iconPath>UI/PsychicRituals/BRF_PsychicRitual_SummonClumps</iconPath>
    <researchPrerequisite>BRF_SummonClumpsResearch</researchPrerequisite>
    <outcomeDescription>The higher the ritual quality, the more Clumps that will be summoned.</outcomeDescription>
    <hoursUntilOutcome>4</hoursUntilOutcome>
    <castableOnPocketMaps>false</castableOnPocketMaps>
    <layerWhitelist>
      <li>Surface</li>
    </layerWhitelist>
    <combatPointMultiplierFromQualityRange>0.5~2.5</combatPointMultiplierFromQualityRange>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_ScarletFerrite</li>
        </thingDefs>
      </filter>
      <count>15</count>
    </requiredOffering>
    <cooldownHours>240</cooldownHours>
  </Luna_BRF.PsychicRitualDef_SummonClumps>

  <Luna_BRF.PsychicRitualDef_SummonRawProphet>
    <defName>BRF_SummonRawProphet</defName>
    <label>Thirst Gate</label>
    <description>By following the steps below, we can summon that smelly and sticky prophet. First, offer blood-forged steel to create a psychic pulse; then kill an innocent sacrifice to please the thirsty gate with its death and flesh; finally, guide the psychic energy to the fleshmass nucleus closest to the ritual site, destroy it and replace the monster.\n\n It will appear in the center of the ritual, which is dangerous, but we can temporarily restrain it to buy a few preparation times.</description>
    <iconPath>UI/PsychicRituals/BRF_PsychicRitual_SummonRawProphet</iconPath>
    <researchPrerequisite>BRF_DreamApproachingResearch</researchPrerequisite>
    <descriptionHyperlinks>
      <ThingDef>BRF_RawProphet</ThingDef>
      <ThingDef>FleshmassNucleus</ThingDef>
    </descriptionHyperlinks>
    <outcomeDescription>With the current qualityï¼Œwe are able to restrain the Raw Prophet for {0} seconds.</outcomeDescription>
    <hoursUntilOutcome>4</hoursUntilOutcome>
    <targetRole>BRF_RitualRoleVictim</targetRole>
    <shockDurationFromQualityCurve>
      <points>
        <li>(0, 0)</li>
        <li>(0.25, 6)</li>
        <li>(0.8, 8)</li>
        <li>(0.9, 10)</li>
        <li>(1, 12.5)</li>
      </points>
    </shockDurationFromQualityCurve>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_ScarletFerrite</li>
        </thingDefs>
      </filter>
      <count>25</count>
    </requiredOffering>
    <cooldownHours>120</cooldownHours>
  </Luna_BRF.PsychicRitualDef_SummonRawProphet>

  <Luna_BRF.PsychicRitualDef_ExileRawProphet>
    <defName>BRF_ExileRawProphet</defName>
    <label>Exile Prophet</label>
    <description>Similar to summoning the raw prophet, we can sacrifice a victim to open the Thirst Gate again, banishing the uncontained raw prophet back to that terrible space. This time, fewer sacrifices are required, and if we have already caused it enough damage, it will not take the strange object it has not yet dropped.\n\n It don't work in unnatural darkness.</description>
    <descriptionHyperlinks>
      <ThingDef>BRF_RawProphet</ThingDef>
    </descriptionHyperlinks>
    <iconPath>UI/PsychicRituals/BRF_PsychicRitual_ExileRawProphet</iconPath>
    <researchPrerequisite>BRF_DreamApproachingResearch</researchPrerequisite>
    <outcomeDescription>With the current quality, there's a {0} chance the invoker will receive dark psychic shock.</outcomeDescription>
    <hoursUntilOutcome>1.5</hoursUntilOutcome>
    <targetRole>BRF_RitualRoleVictim</targetRole>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_LivingFlesh</li>
        </thingDefs>
      </filter>
      <count>7</count>
    </requiredOffering>
    <psychicShockChanceFromQualityCurve>
      <points>
        <li>(0, 0.8)</li>
        <li>(0.5, 0.2)</li>
        <li>(0.9, 0.05)</li>
        <li>(1, 0.01)</li>
      </points>
    </psychicShockChanceFromQualityCurve>
    <darkPsychicShockDurarionHoursRange>2~4</darkPsychicShockDurarionHoursRange>
    <cooldownHours>360</cooldownHours>
  </Luna_BRF.PsychicRitualDef_ExileRawProphet>
  
  <Luna_BRF.PsychicRitualDef_AkulothRitual>
    <defName>BRF_AkulothRitual</defName>
    <label>Akuloth Symbiosis</label>
    <description>The victim is sacrificed through a bloody ritual so that the person conducting the ritual can successfully achieve symbiosis with the akuloth.</description>
    <descriptionHyperlinks>
      <ThingDef>BRF_Akuloth_Bionic</ThingDef>
    </descriptionHyperlinks>
    <iconPath>UI/PsychicRituals/BRF_Akuloth_Ritual</iconPath>
    <researchPrerequisite>BRF_WhiteWormTantraResearch</researchPrerequisite>
    <hoursUntilOutcome>1</hoursUntilOutcome>
    <invokerRole>BRF_AkulothRecipient</invokerRole>
    <targetRole>BRF_RitualRoleVictim</targetRole>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_Akuloth_Bionic</li>
        </thingDefs>
      </filter>
      <count>1</count>
    </requiredOffering>
    <cooldownHours>12</cooldownHours>
  </Luna_BRF.PsychicRitualDef_AkulothRitual>
  
  <Luna_BRF.PsychicRitualDef_InitiationRitual>
    <defName>BRF_InitiationRitual</defName>
    <label>Initiation Ritual</label>
    <description>Grants enlightenment to the target of the ritual, allowing it to become a glorious Orin.</description>
    <iconPath>UI/PsychicRituals/BRF_PsychicRitual_InitiationRitual</iconPath>
    <researchPrerequisite>BRF_NightTravelingTantraResearch</researchPrerequisite>
    <hoursUntilOutcome>4</hoursUntilOutcome>
    <targetRole>BRF_TheInspiredTarget</targetRole>
    <outcomeDescription>The target will gain trait of Orin.\n\nWith the current quality, if the invoker isn's a Sarkicism, the target's skills will also be reduced by {0}.</outcomeDescription>
    <requiredOffering>
      <filter>
        <thingDefs>
          <li>BRF_CrimsonArchocrystal</li>
        </thingDefs>
      </filter>
      <count>1</count>
    </requiredOffering>
    <skillOffsetPercentFromQualityCurve>
      <points>
        <li>(0, -0.75)</li>
        <li>(0.5, -0.25)</li>
        <li>(0.75, -0.1)</li>
        <li>(1, -0.01)</li>
      </points>
    </skillOffsetPercentFromQualityCurve>
    <cooldownHours>180</cooldownHours>
  </Luna_BRF.PsychicRitualDef_InitiationRitual>

  <PsychicRitualRoleDef>
    <defName>BRF_RitualRoleVictim</defName>
    <label>victim</label>
    <description>As a sacrifice of the ritual, this unfortunate fellow will cease to exist regardless of whether the ritual succeeds or not.</description>
    <allowedCount>1</allowedCount>
    <allowedConditions>Default, Downed, Prisoner, Sleeping, IdeoUnwilling</allowedConditions>
    <applyPowerOffset>false</applyPowerOffset>
  </PsychicRitualRoleDef>

  <Luna_BRF.PsychicRitualRoleDef_AkulothInvoker>
    <defName>BRF_AkulothRecipient</defName>
    <label>implant recipient</label>
    <allowedCount>1</allowedCount>
    <canHandleOfferings>true</canHandleOfferings>
    <showInvocationVfx>true</showInvocationVfx>
    <allowedConditions>DefaultInvoker</allowedConditions>
  </Luna_BRF.PsychicRitualRoleDef_AkulothInvoker>

  <Luna_BRF.PsychicRitualRoleDef_InitiationTarget>
    <defName>BRF_TheInspiredTarget</defName>
    <label>the inspired</label>
    <allowedCount>1</allowedCount>
    <allowedConditions>Default, Downed, Prisoner, Sleeping, IdeoUnwilling</allowedConditions>
  </Luna_BRF.PsychicRitualRoleDef_InitiationTarget>

</Defs>